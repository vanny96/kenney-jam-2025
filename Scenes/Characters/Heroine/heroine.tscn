[gd_scene load_steps=29 format=3 uid="uid://ddaal4qsp2hq6"]

[ext_resource type="PackedScene" uid="uid://iyuj57fc5nk4" path="res://Art/Model/Characters/characterSmall.fbx" id="1_gakjb"]
[ext_resource type="Script" uid="uid://dgle1hnxyrfw0" path="res://Scenes/Characters/Heroine/heroine.gd" id="1_sosi2"]
[ext_resource type="PackedScene" uid="uid://caynedaukrpef" path="res://Scenes/Characters/Heroine/Art/hairPigtail.fbx" id="2_s5cfr"]
[ext_resource type="AnimationLibrary" uid="uid://bkiaogv6wjt7h" path="res://Scenes/Characters/Heroine/Art/heroine_animations.tres" id="2_wa6h7"]
[ext_resource type="Texture2D" uid="uid://ctnwa76p3xkjg" path="res://Scenes/Characters/Heroine/Art/fantasyFemaleB.png" id="3_dyn5h"]
[ext_resource type="Script" uid="uid://bpu7ck8uwlhy2" path="res://Scenes/Characters/Heroine/StateMachine/limbo_hsm.gd" id="5_l1h34"]
[ext_resource type="Script" uid="uid://c3qit4844vgsw" path="res://Scenes/Characters/Heroine/StateMachine/idle.gd" id="6_0rg73"]
[ext_resource type="Script" uid="uid://u4t2cy63wb1" path="res://Scenes/Characters/Heroine/StateMachine/energetic_state.gd" id="6_dyn5h"]
[ext_resource type="Script" uid="uid://2uo12ps8p00q" path="res://Scenes/Characters/Heroine/StateMachine/run.gd" id="7_xcws6"]
[ext_resource type="Script" uid="uid://d17rkvnaarxtc" path="res://Scenes/Characters/Heroine/StateMachine/attack.gd" id="8_hh8c5"]
[ext_resource type="Script" uid="uid://bkywnhkdo43w5" path="res://Scenes/Characters/Heroine/StateMachine/sleep.gd" id="9_fy0xi"]
[ext_resource type="Script" uid="uid://dblqiemhgys3q" path="res://Scenes/Characters/Heroine/StateMachine/sleepy_state.gd" id="10_0v53g"]
[ext_resource type="Script" uid="uid://bbhbd6jx3487t" path="res://Scenes/Characters/Heroine/StateMachine/walk.gd" id="10_rnhsi"]
[ext_resource type="PackedScene" uid="uid://dltkdiauyux4s" path="res://Scenes/UI/health/health_bar.tscn" id="13_3qvek"]
[ext_resource type="PackedScene" uid="uid://dteyvla2c1i6n" path="res://Utils/MultiAudioEmitter/MultiAudioEmitter.tscn" id="14_yo34s"]
[ext_resource type="AudioStream" uid="uid://xwvnq5sipvqp" path="res://Scenes/Characters/Heroine/Audio/hits/hit_1.mp3" id="15_2yix8"]
[ext_resource type="AudioStream" uid="uid://dwsifnna76136" path="res://Scenes/Characters/Heroine/Audio/hits/hit_2.mp3" id="16_s5cfr"]
[ext_resource type="AudioStream" uid="uid://cthvhlrfravad" path="res://Scenes/Characters/Heroine/Audio/hits/hit_3.mp3" id="17_tpmtx"]
[ext_resource type="PackedScene" uid="uid://c3bjhqcaamq6s" path="res://Scenes/Characters/Heroine/Art/hairTail.fbx" id="19_tpmtx"]
[ext_resource type="Theme" uid="uid://5pklym2f8loh" path="res://Scenes/Menus/Art/menus.tres" id="20_cdv38"]

[sub_resource type="ViewportTexture" id="ViewportTexture_cdv38"]
viewport_path = NodePath("SleepingParticles/SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tmjmr"]
resource_local_to_scene = true
transparency = 1
vertex_color_use_as_albedo = true
albedo_texture = SubResource("ViewportTexture_cdv38")
billboard_mode = 1
billboard_keep_scale = true

[sub_resource type="QuadMesh" id="QuadMesh_640je"]
resource_local_to_scene = true
material = SubResource("StandardMaterial3D_tmjmr")

[sub_resource type="Curve" id="Curve_cdv38"]
_limits = [0.0, 1.5, 0.0, 1.0]
_data = [Vector2(0.00655022, 0.00684428), 0.0, 0.0, 0, 0, Vector2(0.995633, 1.48196), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_l1h34"]
albedo_texture = ExtResource("3_dyn5h")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tpmtx"]
resource_name = "Blonde"
vertex_color_use_as_albedo = true
albedo_color = Color(0.57758, 0.36675, 0.227387, 1)
emission_enabled = true
emission = Color(0.639216, 0.407843, 0.254902, 1)
emission_energy_multiplier = 0.0

[sub_resource type="BoxShape3D" id="BoxShape3D_dyn5h"]
size = Vector3(2.2, 2, 1.8)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_wa6h7"]
radius = 1.0
height = 4.0

[node name="Heroine" type="CharacterBody3D" groups=["citizien"]]
script = ExtResource("1_sosi2")
speed = 9.0
sprint_speed = 15.0
walk_speed = 4.0
sleep_time = 3.5
max_punches = 2
max_health = 10

[node name="SleepingParticles" type="CPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.28321, 0, 0.887333)
amount = 4
lifetime = 1.5
mesh = SubResource("QuadMesh_640je")
direction = Vector3(0, 1, 0)
spread = 0.0
gravity = Vector3(0, 0, 0)
initial_velocity_min = 2.0
initial_velocity_max = 2.0
scale_amount_curve = SubResource("Curve_cdv38")

[node name="SubViewport" type="SubViewport" parent="SleepingParticles"]
disable_3d = true
transparent_bg = true

[node name="RichTextLabel" type="RichTextLabel" parent="SleepingParticles/SubViewport"]
clip_contents = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -56.0
offset_top = -163.5
offset_right = 56.0
offset_bottom = 163.5
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("20_cdv38")
theme_override_constants/outline_size = 30
theme_override_font_sizes/normal_font_size = 200
text = "Z"
fit_content = true
autowrap_mode = 0

[node name="characterSmall" parent="." instance=ExtResource("1_gakjb")]

[node name="Skeleton3D" parent="characterSmall/Root" index="0"]
bones/0/rotation = Quaternion(-0.5, -0.5, 0.5, 0.5)
bones/1/position = Vector3(0.000795303, 0.00179901, -0.000222405)
bones/1/rotation = Quaternion(-0.507454, 0.508134, -0.491989, -0.492175)
bones/1/scale = Vector3(1, 1, 1)
bones/2/position = Vector3(-0.000286685, 0.0031561, 1.02711e-05)
bones/2/rotation = Quaternion(0.0155854, -0.00204023, 0.994626, -0.102335)
bones/2/scale = Vector3(0.999999, 1, 1)
bones/3/position = Vector3(-1.82146e-05, 0.00241522, 0.0018005)
bones/3/rotation = Quaternion(0.946129, -0.0218711, 0.0755029, -0.314103)
bones/5/position = Vector3(-6.59195e-17, -5.72205e-10, -8.67362e-19)
bones/5/rotation = Quaternion(0.5, 0.5, -0.5, 0.5)
bones/7/position = Vector3(-0.00617958, -0.00586701, 0.0017015)
bones/7/rotation = Quaternion(-0.707107, 5.55112e-17, 0.707107, 1.66533e-16)
bones/9/rotation = Quaternion(-0.5, -0.5, 0.5, 0.5)
bones/10/position = Vector3(0.000795304, 0.00179901, 0.000222404)
bones/10/rotation = Quaternion(-0.507767, 0.507971, -0.491669, -0.492341)
bones/10/scale = Vector3(1, 1, 1)
bones/11/position = Vector3(0.000286762, 0.0031561, -7.84347e-06)
bones/11/rotation = Quaternion(0.0158259, 0.00119163, 0.994622, 0.102349)
bones/11/scale = Vector3(0.999998, 1, 1)
bones/12/position = Vector3(1.82139e-05, 0.00241522, 0.0018005)
bones/12/rotation = Quaternion(0.948112, 0.0114452, -0.044093, -0.314656)
bones/12/scale = Vector3(1, 1, 1)
bones/14/position = Vector3(-6.61363e-17, -5.72205e-10, 8.67362e-19)
bones/14/rotation = Quaternion(0.5, 0.5, -0.5, 0.5)
bones/14/scale = Vector3(1, 1, 1)
bones/16/position = Vector3(-0.00617958, -0.00586701, -0.00160237)
bones/16/rotation = Quaternion(-0.707107, 5.55112e-17, 0.707107, 1.66533e-16)
bones/18/position = Vector3(-5.2365e-05, -1.48765e-05, 0.00147024)
bones/18/rotation = Quaternion(0.553675, 0.665464, -0.321908, 0.383376)
bones/19/position = Vector3(4.64599e-06, 0.00321951, -3.99372e-10)
bones/19/rotation = Quaternion(5.28985e-05, -0.0277724, 0.999613, 0.00144519)
bones/20/position = Vector3(-3.13546e-12, 0.00321952, -2.7452e-16)
bones/20/rotation = Quaternion(0.0750984, -0.139107, -0.17147, 0.972424)
bones/20/scale = Vector3(1, 1, 1)
bones/21/position = Vector3(4.66113e-14, 0.00319221, -1.24718e-11)
bones/21/rotation = Quaternion(0.0623484, -0.0448529, -0.00280481, 0.997042)
bones/21/scale = Vector3(1, 1, 1)
bones/22/position = Vector3(3.72435e-13, 0.00195983, 4.10924e-10)
bones/22/rotation = Quaternion(0.0940942, -3.90998e-09, -2.64102e-10, 0.995563)
bones/23/position = Vector3(-3.72541e-13, 0.00208991, -7.71579e-10)
bones/23/rotation = Quaternion(0.179276, -0.0807493, 0.176621, 0.96444)
bones/24/position = Vector3(-1.32161e-16, 0.00187469, 5.17043e-10)
bones/24/rotation = Quaternion(-0.234462, 0.338015, -0.0222395, 0.911196)
bones/24/scale = Vector3(1, 1, 1)
bones/26/position = Vector3(0.0008828, 0.00219208, 0.00064961)
bones/26/rotation = Quaternion(0.304884, 0.368365, 0.790591, -0.382518)
bones/26/scale = Vector3(1, 1, 1)
bones/27/position = Vector3(1.4322e-11, 0.00258801, -8.52233e-10)
bones/27/rotation = Quaternion(0.220521, 0.108444, -0.31979, 0.915066)
bones/27/scale = Vector3(1, 1, 1)
bones/28/position = Vector3(-2.18661e-09, 0.00303281, -9.19747e-11)
bones/28/rotation = Quaternion(0.827599, 0.00941234, 0.0161512, 0.561009)
bones/28/scale = Vector3(1, 1, 1)
bones/29/position = Vector3(3.20293e-09, 0.00324679, 1.35973e-10)
bones/29/rotation = Quaternion(0.175371, 0.851958, 0.0945335, 0.484227)
bones/29/scale = Vector3(1, 1, 1)
bones/30/position = Vector3(-1.58544e-11, 0.00123157, -1.45514e-09)
bones/30/rotation = Quaternion(0.00959678, -0.0104652, 0.10546, 0.994322)
bones/31/position = Vector3(1.82983e-10, 0.00129749, 1.74324e-09)
bones/31/rotation = Quaternion(0.140391, 0.0601489, -0.0157729, 0.988142)
bones/31/scale = Vector3(1, 1, 1)
bones/32/position = Vector3(7.60418e-11, 0.00102456, -3.48726e-09)
bones/32/rotation = Quaternion(-0.0999017, -0.0306874, 0.0288037, 0.994107)
bones/32/scale = Vector3(1, 1, 1)
bones/34/position = Vector3(-0.000942239, 0.000701893, 0.00024203)
bones/34/rotation = Quaternion(-0.216401, 0.683285, 0.241715, 0.654114)
bones/34/scale = Vector3(1, 1, 1)
bones/35/position = Vector3(-3.33707e-09, 0.00106019, -1.11262e-09)
bones/35/rotation = Quaternion(0.354218, -0.0410229, 0.0241818, 0.93395)
bones/35/scale = Vector3(1, 1, 1)
bones/37/position = Vector3(-0.000882801, 0.00219208, 0.00064961)
bones/37/rotation = Quaternion(0.437993, -0.72652, 0.503038, 0.165177)
bones/37/scale = Vector3(1, 1, 1)
bones/38/position = Vector3(7.76675e-10, 0.00258801, 4.6812e-10)
bones/38/rotation = Quaternion(0.14898, 0.560169, -0.0434112, -0.813715)
bones/38/scale = Vector3(1, 1, 1)
bones/39/position = Vector3(7.38502e-10, 0.00303281, -2.17891e-09)
bones/39/rotation = Quaternion(0.00316575, -0.0895389, 0.772536, 0.628618)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(4.62795e-10, 0.00324679, 4.43922e-09)
bones/40/rotation = Quaternion(0.101071, 0.0234226, 0.185989, 0.977059)
bones/40/scale = Vector3(1, 1, 1)
bones/41/position = Vector3(7.21468e-10, 0.00123157, -1.75149e-09)
bones/41/rotation = Quaternion(-0.168946, -0.0591637, 0.108694, 0.977825)
bones/41/scale = Vector3(1, 1, 1)
bones/42/position = Vector3(-5.13353e-10, 0.0012975, 3.78223e-10)
bones/42/rotation = Quaternion(-0.425048, 0.0665151, -0.0320817, 0.902154)
bones/42/scale = Vector3(1, 1, 1)
bones/43/position = Vector3(3.17227e-10, 0.00102456, -3.15531e-09)
bones/43/rotation = Quaternion(-0.0373645, -0.0274006, 0.0154172, 0.998807)
bones/43/scale = Vector3(1, 1, 1)
bones/45/position = Vector3(-0.000891421, 0.00070189, -0.000389567)
bones/45/rotation = Quaternion(-0.315699, 0.844401, -0.255287, -0.3495)
bones/45/scale = Vector3(1, 1, 1)
bones/46/position = Vector3(-1.31912e-09, 0.00106019, 4.11107e-10)
bones/46/rotation = Quaternion(-0.273848, -0.0433127, 0.353927, 0.893234)
bones/46/scale = Vector3(1, 1, 1)
bones/48/position = Vector3(0.00188187, 0.000809205, 2.59125e-05)
bones/48/rotation = Quaternion(0.919663, -0.0542997, -0.226523, 0.316162)
bones/48/scale = Vector3(0.999996, 1, 0.999998)
bones/49/position = Vector3(-3.05858e-10, 0.00425632, -6.5678e-11)
bones/49/rotation = Quaternion(0.559265, -0.008746, 0.066647, 0.826259)
bones/49/scale = Vector3(1, 1, 1)
bones/50/position = Vector3(5.89609e-10, 0.00413207, -2.16918e-11)
bones/50/rotation = Quaternion(-0.281223, -0.148666, -0.229729, 0.919803)
bones/50/scale = Vector3(1, 1, 1)
bones/51/position = Vector3(-1.82922e-10, 0.00301255, 3.03371e-10)
bones/51/rotation = Quaternion(-0.0137828, 0.953026, -0.295826, 0.063544)
bones/51/scale = Vector3(1, 1, 1)
bones/53/position = Vector3(-0.00188187, 0.000809205, 2.59125e-05)
bones/53/rotation = Quaternion(0.826399, 0.173357, -0.14118, 0.516798)
bones/53/scale = Vector3(0.999996, 1, 0.999998)
bones/54/position = Vector3(-1.61147e-10, 0.00425632, -3.20152e-12)
bones/54/rotation = Quaternion(0.872227, 0.127441, 0.142311, 0.450251)
bones/54/scale = Vector3(1, 1, 1)
bones/55/position = Vector3(2.46078e-10, 0.00413207, -4.05397e-10)
bones/55/rotation = Quaternion(-0.267206, -0.169361, 0.0957359, 0.943797)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(1.3783e-10, 0.00301255, 3.85857e-11)
bones/56/rotation = Quaternion(0.0221592, 0.954752, -0.295316, -0.0273092)

[node name="characterSmall" parent="characterSmall/Root/Skeleton3D" index="0" groups=["citizien"]]
surface_material_override/0 = SubResource("StandardMaterial3D_l1h34")

[node name="HeadAttachment" type="BoneAttachment3D" parent="characterSmall/Root/Skeleton3D" index="1"]
transform = Transform3D(0.00376841, -0.962734, 0.270426, -0.536183, -0.230213, -0.812103, 0.844098, -0.141938, -0.517067, -0.0204957, -0.00749782, -0.000499569)
bone_name = "Head_end"
bone_idx = 25

[node name="hairPigtail" parent="characterSmall/Root/Skeleton3D/HeadAttachment" instance=ExtResource("2_s5cfr")]
transform = Transform3D(0.01, 4.72492e-10, -8.13041e-10, -3.51991e-10, 0.00999932, 0.000117164, 8.15934e-10, -0.000117165, 0.00999931, 8.73115e-11, -0.00126076, -0.00556413)

[node name="TailAttachment" type="BoneAttachment3D" parent="characterSmall/Root/Skeleton3D" index="2"]
transform = Transform3D(0.095802, -0.990473, 0.0989215, -0.489718, -0.133419, -0.861613, 0.866606, 0.0341004, -0.497832, 0.00311432, 0.000565749, 0.00145364)
bone_name = "Hips"
bone_idx = 19

[node name="hairTail" parent="characterSmall/Root/Skeleton3D/TailAttachment" instance=ExtResource("19_tpmtx")]
transform = Transform3D(0.01, -1.21327e-09, -1.42607e-11, 1.21061e-09, 0.00998457, -0.000555233, 8.16035e-11, 0.000555233, 0.00998457, -4.14722e-06, 0.00177379, -0.00167421)

[node name="hairTail" parent="characterSmall/Root/Skeleton3D/TailAttachment/hairTail" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_tpmtx")

[node name="AttackArea" type="Area3D" parent="characterSmall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.26084, 1.42994)

[node name="CollisionShape3D" type="CollisionShape3D" parent="characterSmall/AttackArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0341437)
shape = SubResource("BoxShape3D_dyn5h")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"heroine": ExtResource("2_wa6h7")
}
autoplay = "heroine/idle"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.22932, 0)
shape = SubResource("CapsuleShape3D_wa6h7")

[node name="LimboHSM" type="LimboHSM" parent="."]
script = ExtResource("5_l1h34")

[node name="Energetic" type="LimboHSM" parent="LimboHSM" node_paths=PackedStringArray("heroine")]
script = ExtResource("6_dyn5h")
heroine = NodePath("../..")

[node name="Idle" type="LimboState" parent="LimboHSM/Energetic" node_paths=PackedStringArray("animation_player")]
script = ExtResource("6_0rg73")
animation_player = NodePath("../../../AnimationPlayer")

[node name="Run" type="LimboState" parent="LimboHSM/Energetic" node_paths=PackedStringArray("animation_player", "heroine")]
script = ExtResource("7_xcws6")
animation_player = NodePath("../../../AnimationPlayer")
heroine = NodePath("../../..")

[node name="Attack" type="LimboState" parent="LimboHSM/Energetic" node_paths=PackedStringArray("heroine", "animation_player", "audio_emitter", "collision_area")]
script = ExtResource("8_hh8c5")
heroine = NodePath("../../..")
animation_player = NodePath("../../../AnimationPlayer")
audio_emitter = NodePath("../../../HitSoundEmitter")
collision_area = NodePath("../../../characterSmall/AttackArea")

[node name="Sleep" type="LimboState" parent="LimboHSM/Energetic" node_paths=PackedStringArray("heroine", "animation_player", "sleeping_vfs")]
script = ExtResource("9_fy0xi")
heroine = NodePath("../../..")
animation_player = NodePath("../../../AnimationPlayer")
sleeping_vfs = NodePath("../../../SleepingParticles")

[node name="Sleepy" type="LimboHSM" parent="LimboHSM" node_paths=PackedStringArray("heroine")]
script = ExtResource("10_0v53g")
heroine = NodePath("../..")

[node name="Idle" type="LimboState" parent="LimboHSM/Sleepy" node_paths=PackedStringArray("animation_player")]
script = ExtResource("6_0rg73")
animation_player = NodePath("../../../AnimationPlayer")

[node name="Walk" type="LimboState" parent="LimboHSM/Sleepy" node_paths=PackedStringArray("animation_player", "heroine")]
script = ExtResource("10_rnhsi")
animation_player = NodePath("../../../AnimationPlayer")
heroine = NodePath("../../..")

[node name="Sleep" type="LimboState" parent="LimboHSM/Sleepy" node_paths=PackedStringArray("heroine", "animation_player", "sleeping_vfs")]
script = ExtResource("9_fy0xi")
heroine = NodePath("../../..")
animation_player = NodePath("../../../AnimationPlayer")
sleeping_vfs = NodePath("../../../SleepingParticles")

[node name="VisionLight" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.0172605, 0.999851, 0, -0.999851, 0.0172605, 0, 9.9215, 0.821142)
light_bake_mode = 0
spot_range = 15.0
spot_attenuation = 0.0
spot_angle = 35.0

[node name="HealthBar" parent="." node_paths=PackedStringArray("target") instance=ExtResource("13_3qvek")]
target = NodePath("..")
signal_name = "attacked_signal"
health_field = "curr_health"
max_health_field = "max_health"

[node name="HitSoundEmitter" parent="." instance=ExtResource("14_yo34s")]
audios = Array[AudioStream]([ExtResource("15_2yix8"), ExtResource("16_s5cfr"), ExtResource("17_tpmtx")])

[editable path="characterSmall"]
[editable path="characterSmall/Root/Skeleton3D/HeadAttachment/hairPigtail"]
[editable path="characterSmall/Root/Skeleton3D/TailAttachment/hairTail"]
